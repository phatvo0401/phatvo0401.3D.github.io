<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VTP | 3D Archive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --miku: #39c5bb; --glass: rgba(255, 255, 255, 0.02); --border: rgba(57, 197, 187, 0.2); }
        body { font-family: 'Lexend', sans-serif; background-color: #050a09; color: #e6f7f6; margin: 0; overflow-x: hidden; }
        
        .miku-text { color: var(--miku); text-shadow: 0 0 15px rgba(57, 197, 187, 0.4); }
        
        /* Khung bao ngoài giống web chính */
        .viewport-box {
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 40px;
            padding: 30px;
            position: relative;
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .viewport-box:hover {
            background: rgba(57, 197, 187, 0.08);
            border-color: var(--miku);
            transform: translateY(-10px);
        }

        /* Khung chứa model bên trong */
        .sub-viewport {
            width: 100%;
            aspect-ratio: 1/1;
            background: #000;
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 25px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 50px rgba(57, 197, 187, 0.05);
        }

        .archive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 40px;
            padding: 40px;
            width: 100%;
            max-width: 1400px;
        }

        .btn-back {
            padding: 10px 25px;
            border: 1px solid var(--border);
            border-radius: 100px;
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: 0.3s;
        }
        .btn-back:hover {
            background: var(--miku);
            color: #000;
            border-color: var(--miku);
        }
    </style>
</head>
<body>

    <nav class="fixed w-full z-50 py-6 px-12 flex justify-between items-center bg-[#050a09]/80 backdrop-blur-xl border-b border-white/5">
        <div class="flex items-center tracking-tighter">
            <span class="font-black miku-text text-xl uppercase mr-2">VTP</span>
            <span class="font-light text-white/50 text-xs uppercase tracking-[0.3em]">3D Archive</span>
        </div>
        <a href="https://[username].github.io/" class="btn-back">Back to Home</a>
    </nav>

    <header class="pt-48 pb-10 text-center">
        <h1 class="text-6xl md:text-8xl font-black mb-6 uppercase tracking-tighter italic">GALLERY <span class="miku-text">3D</span></h1>
        <div class="h-[1px] w-20 bg-miku mx-auto mb-6 opacity-50"></div>
        <p class="text-white/30 tracking-[0.5em] uppercase text-[9px]">Lưu trữ mô hình kỹ thuật số chuyên biệt</p>
    </header>

    <main class="flex justify-center pb-32">
        <div class="archive-grid">
            
            <div class="viewport-box">
                <div class="sub-viewport" id="m1"></div>
                <div class="mt-8 flex justify-between items-end">
                    <div>
                        <h3 class="font-black text-xl uppercase tracking-tighter miku-text">Project 01</h3>
                        <p class="text-[9px] text-white/40 uppercase tracking-widest mt-1">ZBrush / STL Format</p>
                    </div>
                    <div class="text-[8px] font-bold text-white/20 border border-white/10 px-3 py-1 rounded-full uppercase italic">VTP 3D</div>
                </div>
            </div>

            <div class="viewport-box">
                <div class="sub-viewport" id="m2"></div>
                <div class="mt-8 flex justify-between items-end">
                    <div>
                        <h3 class="font-black text-xl uppercase tracking-tighter miku-text">Project 02</h3>
                        <p class="text-[9px] text-white/40 uppercase tracking-widest mt-1">ZBrush / STL Format</p>
                    </div>
                    <div class="text-[8px] font-bold text-white/20 border border-white/10 px-3 py-1 rounded-full uppercase italic">VTP 3D</div>
                </div>
            </div>

            <div class="viewport-box">
                <div class="sub-viewport" id="m3"></div>
                <div class="mt-8 flex justify-between items-end">
                    <div>
                        <h3 class="font-black text-xl uppercase tracking-tighter miku-text">Project 03</h3>
                        <p class="text-[9px] text-white/40 uppercase tracking-widest mt-1">ZBrush / STL Format</p>
                    </div>
                    <div class="text-[8px] font-bold text-white/20 border border-white/10 px-3 py-1 rounded-full uppercase italic">VTP 3D</div>
                </div>
            </div>

        </div>
    </main>

    <script type="importmap">{ "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js", "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/" } }</script>
    
    <script type="module">
        import * as THREE from 'three';
        import { STLLoader } from 'three/addons/loaders/STLLoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        function init3D(id, path) {
            const container = document.getElementById(id);
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
            camera.position.set(0, 35, 75); // Góc nghiêng nhìn từ trên xuống

            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            // Lighting setup
            scene.add(new THREE.AmbientLight(0xffffff, 0.3));
            const sun = new THREE.DirectionalLight(0x39c5bb, 2.5);
            sun.position.set(10, 25, 10);
            scene.add(sun);
            
            const fill = new THREE.PointLight(0x39c5bb, 1.2);
            fill.position.set(-15, -10, 15);
            scene.add(fill);

            const controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.enableZoom = false;

            const loader = new STLLoader();
            loader.load(path, (geometry) => {
                geometry.center();
                const material = new THREE.MeshPhongMaterial({ 
                    color: 0x39c5bb, 
                    specular: 0x111111, 
                    shininess: 80,
                    transparent: true,
                    opacity: 0.95
                });
                const mesh = new THREE.Mesh(geometry, material);
                
                // Trục xoay chéo signature
                mesh.rotation.x = -Math.PI / 2;
                mesh.rotation.z = Math.PI / 4;

                const box = new THREE.Box3().setFromObject(mesh);
                const size = box.getSize(new THREE.Vector3());
                const scale = 55 / Math.max(size.x, size.y, size.z);
                mesh.scale.set(scale, scale, scale);
                
                scene.add(mesh);

                function animate() {
                    requestAnimationFrame(animate);
                    mesh.rotation.z += 0.005; // Xoay chậm
                    controls.update();
                    renderer.render(scene, camera);
                }
                animate();
            }, undefined, (error) => {
                console.error("Lỗi tải file STL:", error);
            });
        }

        // TẤT CẢ TRỎ VỀ CÙNG 1 FILE model.stl
        init3D('m1', 'model.stl');
        init3D('m2', 'model.stl');
        init3D('m3', 'model.stl');

    </script>
</body>
</html>
